-- LocalScript (StarterGui)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

-- ======= GUI Setup =======
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GigaChadHelper"
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 300, 0, 250)
frame.Position = UDim2.new(0, 50, 0, 50)
frame.BackgroundColor3 = Color3.fromRGB(40,40,40)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local function createToggle(name, default, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -10, 0, 30)
    btn.Position = UDim2.new(0,5,0,0)
    btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = name.." : "..(default and "ON" or "OFF")
    btn.Parent = frame
    btn.MouseButton1Click:Connect(function()
        default = not default
        btn.Text = name.." : "..(default and "ON" or "OFF")
        callback(default)
    end)
    return btn
end

local function createSlider(name, min, max, default, callback)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -10, 0, 20)
    label.Position = UDim2.new(0,5,0,0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255,255,255)
    label.Text = name.." : "..default
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local slider = Instance.new("TextBox")
    slider.Size = UDim2.new(1, -10, 0, 25)
    slider.Position = UDim2.new(0,5,0,0)
    slider.Text = tostring(default)
    slider.ClearTextOnFocus = false
    slider.Parent = frame

    slider.FocusLost:Connect(function()
        local val = tonumber(slider.Text)
        if val then
            callback(val)
            label.Text = name.." : "..val
        end
    end)
end

-- ======= RemoteEvent setup =======
local trainEvent = ReplicatedStorage:WaitForChild("TrainEvent")
local collectEvent = ReplicatedStorage:WaitForChild("CollectPetEvent")

-- ======= Spot latihan terbaik =======
local spots = {
    Vector3.new(0,10,0),
    Vector3.new(50,10,50),
    Vector3.new(100,10,0)
}
local spotIndex = 1

-- ======= Variabel kontrol =======
local autoTrain = false
local autoCollect = false
local autoTeleport = false
local trainSpeed = 3    -- FireServer per frame
local collectSpeed = 2  -- FireServer per frame

-- ======= GUI Elements =======
createToggle("Auto Train", false, function(state) autoTrain = state end)
createSlider("Train Speed", 1, 10, trainSpeed, function(val) trainSpeed = val end)

createToggle("Auto Collect", false, function(state) autoCollect = state end)
createSlider("Collect Speed", 1, 10, collectSpeed, function(val) collectSpeed = val end)

createToggle("Auto Teleport", false, function(state) autoTeleport = state end)

local stopBtn = Instance.new("TextButton")
stopBtn.Size = UDim2.new(1, -10, 0, 30)
stopBtn.Text = "STOP ALL"
stopBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
stopBtn.TextColor3 = Color3.fromRGB(255,255,255)
stopBtn.Parent = frame
stopBtn.MouseButton1Click:Connect(function()
    autoTrain = false
    autoCollect = false
    autoTeleport = false
end)

-- ======= Main Loop =======
RunService.Heartbeat:Connect(function()
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if hrp and autoTeleport then
        hrp.CFrame = CFrame.new(spots[spotIndex])
        spotIndex = spotIndex + 1
        if spotIndex > #spots then spotIndex = 1 end
    end

    if autoTrain then
        for i = 1, trainSpeed do
            trainEvent:FireServer()
        end
    end

    if autoCollect then
        for i = 1, collectSpeed do
            collectEvent:FireServer()
        end
    end
end)
