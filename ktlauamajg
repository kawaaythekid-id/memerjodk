-- LocalScript (StarterGui) : Anti Goyang Sentuh Objek
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()

-- GUI
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "AntiGoyangGUI"

local label = Instance.new("TextLabel", gui)
label.Size = UDim2.new(0, 250, 0, 50)
label.Position = UDim2.new(0.5, -125, 0.05, 0)
label.Text = "Sentuh objek untuk toggle goyang"
label.TextScaled = true
label.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
label.TextColor3 = Color3.new(1,1,1)
label.Font = Enum.Font.GothamBold
Instance.new("UICorner", label)

-- Data toggle
local stoppedObjects = {} -- simpan status objek yang sudah di-toggle

-- Fungsi stop goyang
local function stopWobble(obj)
	for _, part in pairs(obj:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Anchored = true
			part.Velocity = Vector3.zero
			part.RotVelocity = Vector3.zero
		end
	end
end

-- Fungsi hidupkan kembali
local function startWobble(obj)
	for _, part in pairs(obj:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Anchored = false
		end
	end
end

-- Ketika klik/tap objek
mouse.Button1Down:Connect(function()
	local target = mouse.Target
	if target and target:IsDescendantOf(workspace) then
		local topModel = target:FindFirstAncestorOfClass("Model") or target
		if stoppedObjects[topModel] then
			-- Hidupkan kembali
			startWobble(topModel)
			stoppedObjects[topModel] = nil
			label.Text = "Goyang AKTIF lagi: " .. topModel.Name
		else
			-- Hentikan goyang
			stopWobble(topModel)
			stoppedObjects[topModel] = true
			label.Text = "Goyang DIMATIKAN: " .. topModel.Name
		end
	end
end)
