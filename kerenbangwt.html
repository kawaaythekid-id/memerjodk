-- FINAL ULTRA BROKEN CLIENT SCRIPT ANDROID + MODERN GUI
-- Tempatkan di StarterPlayerScripts

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- ===== Variabel =====
local WalkSpeed = 500
local JumpPower = 300
local FlySpeed = 200

-- ===== Fitur Client-side =====
local features = {
    -- Movement
    InfinityJump = true,
    NoClip = true,
    Fly = true,
    WalkSpeedBoost = false,
    JumpBoost = false,
    AutoJump = true,
    AntiStun = true,
    Floating = true,
    -- Visual
    FullBright = true,
    Invisible = false,
    RainbowChar = false,
    TinyChar = false,
    BigChar = false,
    TinyHead = false,
    SpinCamera = false,
    -- Fun
    SuperSpin = true,
    SpinTool = true,
    BouncyHead = false,
    DrunkMode = false,
    TrailEffect = false,
    RainbowTrail = false,
    -- Misc
    ESP = true,
    InvisibleTool = false,
    BouncePad = false,
    FastAnim = false,
    NoFallDamage = true
}

-- ===== GUI Setup =====
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,220,0,420)
mainFrame.Position = UDim2.new(0,10,0,50)
mainFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Tombol Minimize
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(1,0,0,30)
minimizeBtn.Position = UDim2.new(0,0,0,0)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
minimizeBtn.TextColor3 = Color3.fromRGB(255,255,255)
minimizeBtn.Text = "â€“"
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextScaled = true
minimizeBtn.Parent = mainFrame

-- Tombol Hide
local hideBtn = Instance.new("TextButton")
hideBtn.Size = UDim2.new(0,30,0,30)
hideBtn.Position = UDim2.new(1,-30,0,0)
hideBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
hideBtn.TextColor3 = Color3.fromRGB(255,255,255)
hideBtn.Text = "X"
hideBtn.Font = Enum.Font.SourceSansBold
hideBtn.TextScaled = true
hideBtn.Parent = mainFrame

-- Scrolling Frame
local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.new(1,0,1,-30)
scroll.Position = UDim2.new(0,0,0,30)
scroll.BackgroundTransparency = 1
scroll.ScrollBarThickness = 10
scroll.Active = true
scroll.ScrollingEnabled = true
scroll.Parent = mainFrame

local uiList = Instance.new("UIListLayout")
uiList.Parent = scroll
uiList.SortOrder = Enum.SortOrder.LayoutOrder
uiList.Padding = UDim.new(0,5)
uiList.AutomaticSize = Enum.AutomaticSize.Y

-- Warna per kategori
local categoryColors = {
    Movement = Color3.fromRGB(0,150,255),
    Visual = Color3.fromRGB(255,100,0),
    Fun = Color3.fromRGB(0,200,0),
    Misc = Color3.fromRGB(200,0,200)
}

-- Kategori mapping
local categories = {
    InfinityJump = "Movement",
    NoClip = "Movement",
    Fly = "Movement",
    WalkSpeedBoost = "Movement",
    JumpBoost = "Movement",
    AutoJump = "Movement",
    AntiStun = "Movement",
    Floating = "Movement",

    FullBright = "Visual",
    Invisible = "Visual",
    RainbowChar = "Visual",
    TinyChar = "Visual",
    BigChar = "Visual",
    TinyHead = "Visual",
    SpinCamera = "Visual",

    SuperSpin = "Fun",
    SpinTool = "Fun",
    BouncyHead = "Fun",
    DrunkMode = "Fun",
    TrailEffect = "Fun",
    RainbowTrail = "Fun",

    ESP = "Misc",
    InvisibleTool = "Misc",
    BouncePad = "Misc",
    FastAnim = "Misc",
    NoFallDamage = "Misc"
}

-- ===== Buat Tombol Fitur =====
for name,_ in pairs(features) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,0,0,40)
    btn.BackgroundColor3 = features[name] and categoryColors[categories[name]] or Color3.fromRGB(100,100,100)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Text = name
    btn.Font = Enum.Font.SourceSansBold
    btn.TextScaled = true
    btn.Parent = scroll
    
    -- Animasi touch
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = btn.BackgroundColor3:Lerp(Color3.fromRGB(255,255,255),0.2)
    end)
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = features[name] and categoryColors[categories[name]] or Color3.fromRGB(100,100,100)
    end)
    
    btn.MouseButton1Click:Connect(function()
        features[name] = not features[name]
        btn.BackgroundColor3 = features[name] and categoryColors[categories[name]] or Color3.fromRGB(100,100,100)
    end)
end

-- ===== Fitur Minimize & Hide =====
local minimized = false
minimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        scroll.Visible = false
        mainFrame.Size = UDim2.new(0,220,0,30)
    else
        scroll.Visible = true
        mainFrame.Size = UDim2.new(0,220,0,420)
    end
end)

hideBtn.MouseButton1Click:Connect(function()
    screenGui.Enabled = false
end)

-- ===== Core Functionalities =====
humanoid.WalkSpeed = WalkSpeed
humanoid.JumpPower = JumpPower

-- Infinity Jump
UserInputService.JumpRequest:Connect(function()
    if features.InfinityJump then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- No Clip
RunService.RenderStepped:Connect(function()
    if features.NoClip then
        for _, part in pairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

-- Fly
local flying = false
local flyVelocity = Instance.new("BodyVelocity")
flyVelocity.MaxForce = Vector3.new(1e5,1e5,1e5)
flyVelocity.Velocity = Vector3.new(0,0,0)
flyVelocity.Parent = rootPart

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.F then
        flying = not flying
        if not flying then
            flyVelocity.Velocity = Vector3.new(0,0,0)
        end
    end
end)

RunService.RenderStepped:Connect(function()
    if flying and features.Fly then
        local cam = Workspace.CurrentCamera
        local dir = Vector3.new(0,0,0)
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + cam.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - cam.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - cam.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + cam.CFrame.RightVector end
        flyVelocity.Velocity = dir.Unit * FlySpeed
    end
end)

-- Full Bright
if features.FullBright then
    Lighting.Ambient = Color3.new(1,1,1)
    Lighting.Brightness = 2
    Lighting.FogEnd = 100000
end

-- Reset ketika respawn
player.CharacterAdded:Connect(function(char)
    character = char
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    
    humanoid.WalkSpeed = WalkSpeed
    humanoid.JumpPower = JumpPower
end)
