-- Murder Mystery 2 Sheriff Script for Android (No Cooldown, Pre-Game Shoot, ON/OFF, Minimize)
-- Optimized for touch input with GUI
-- Author: Grok (Inspired by MM2 exploits)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local player = Players.LocalPlayer
local mouse = player:GetMouse() -- For aim reference (if needed)
local gun = player.Character and player.Character:FindFirstChild("Gun")
local scriptEnabled = false -- Status ON/OFF

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui -- Use CoreGui for executor compatibility
ScreenGui.Name = "MM2SheriffGUI"
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 200, 0, 150)
MainFrame.Position = UDim2.new(0.5, -100, 0.5, -75)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true -- Dragable di layar sentuh
MainFrame.Parent = ScreenGui

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.Text = "MM2 Sheriff Hack"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Title.TextScaled = true
Title.Parent = MainFrame

-- ON Button
local OnButton = Instance.new("TextButton")
OnButton.Size = UDim2.new(0.45, 0, 0, 50)
OnButton.Position = UDim2.new(0.05, 0, 0.3, 0)
OnButton.Text = "ON"
OnButton.TextColor3 = Color3.fromRGB(0, 255, 0)
OnButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
OnButton.TextScaled = true
OnButton.Parent = MainFrame

-- OFF Button
local OffButton = Instance.new("TextButton")
OffButton.Size = UDim2.new(0.45, 0, 0, 50)
OffButton.Position = UDim2.new(0.5, 0, 0.3, 0)
OffButton.Text = "OFF"
OffButton.TextColor3 = Color3.fromRGB(255, 0, 0)
OffButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
OffButton.TextScaled = true
OffButton.Parent = MainFrame

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(1, 0, 0, 30)
MinimizeButton.Position = UDim2.new(0, 0, 0.8, 0)
MinimizeButton.Text = "Minimize"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MinimizeButton.TextScaled = true
MinimizeButton.Parent = MainFrame

-- Minimized Button (Hidden initially)
local MinimizedButton = Instance.new("TextButton")
MinimizedButton.Size = UDim2.new(0, 50, 0, 50)
MinimizedButton.Position = UDim2.new(0.05, 0, 0.05, 0)
MinimizedButton.Text = "+"
MinimizedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizedButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MinimizedButton.TextScaled = true
MinimizedButton.Visible = false
MinimizedButton.Parent = ScreenGui

-- No Cooldown Function
local function applyNoCooldown()
    if gun and scriptEnabled then
        local ammo = gun:FindFirstChild("Ammo")
        if ammo then
            ammo.Value = math.huge -- Infinite ammo
        end
        local fireCooldown = gun:FindFirstChild("Cooldown") or Instance.new("IntValue", gun)
        fireCooldown.Name = "Cooldown"
        fireCooldown.Value = 0
        print("No cooldown applied!")
    end
end

-- Pre-Game Shoot Function
local function forceEnableGun()
    if gun and scriptEnabled then
        local gunRemote = ReplicatedStorage:FindFirstChild("GunRemoteEvent") or ReplicatedStorage:FindFirstChild("Remotes"):FindFirstChild("Gun")
        if gunRemote then
            UserInputService.InputBegan:Connect(function(input, gameProcessed)
                if scriptEnabled and not gameProcessed and input.UserInputType == Enum.UserInputType.Touch and gun.Parent == player.Character then
                    gunRemote:FireServer("Fire", mouse.Hit.Position) -- Fire on touch
                    applyNoCooldown()
                end
            end)
            print("Pre-game shoot enabled! Tap to fire.")
        else
            warn("GunRemoteEvent not found. Update remote name.")
        end
    end
end

-- Detect Gun
player.CharacterAdded:Connect(function(character)
    character.ChildAdded:Connect(function(child)
        if child.Name == "Gun" then
            gun = child
            print("Gun detected!")
            if scriptEnabled then
                applyNoCooldown()
                forceEnableGun()
            end
        end
    end)
end)

-- ON Button Functionality
OnButton.MouseButton1Click:Connect(function()
    scriptEnabled = true
    OnButton.TextColor3 = Color3.fromRGB(0, 255, 0)
    OffButton.TextColor3 = Color3.fromRGB(100, 100, 100)
    print("Script ON")
    if gun then
        applyNoCooldown()
        forceEnableGun()
    end
end)

-- OFF Button Functionality
OffButton.MouseButton1Click:Connect(function()
    scriptEnabled = false
    OnButton.TextColor3 = Color3.fromRGB(100, 100, 100)
    OffButton.TextColor3 = Color3.fromRGB(255, 0, 0)
    print("Script OFF")
end)

-- Minimize Button Functionality
MinimizeButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    MinimizedButton.Visible = true
    print("GUI Minimized")
end)

-- Restore GUI from Minimized
MinimizedButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = true
    MinimizedButton.Visible = false
    print("GUI Restored")
end)

-- Auto-detect Sheriff Role
spawn(function()
    while wait(1) do
        local leaderstats = player:FindFirstChild("leaderstats")
        if leaderstats then
            local role = leaderstats:FindFirstChild("Role")
            if role and (role.Value == "Sheriff" or role.Value == "S") then
                if gun and scriptEnabled then
                    applyNoCooldown()
                    forceEnableGun()
                end
            end
        end
    end
end)

-- Notification
StarterGui:SetCore("SendNotification", {
    Title = "MM2 Sheriff Hack",
    Text = "Script loaded! Use ON/OFF to toggle, Minimize to hide.",
    Duration = 5
})

print("MM2 Sheriff Script Loaded for Android! Tap ON to activate.")
