-- LocalScript: Ultimate Extreme Fling GUI Android
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- ===== Variables =====
local flingEnabled = false
local guiVisible = true
local flingPower = 3000
local targetMode = "All" -- "All" atau "Selected"
local flingDirection = "Random" -- "Random", "Vertical", "Horizontal"
local selectedTarget = nil

-- ===== GUI =====
local ScreenGui = Instance.new("ScreenGui", PlayerGui)
ScreenGui.Name = "UltimateExtremeFlingGUI"

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 280, 0, 220)
Frame.Position = UDim2.new(0.5, -140, 0.5, -110)
Frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Frame.Parent = ScreenGui

-- Toggle Button
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(1, -20, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)
ToggleButton.Text = "Fling OFF"
ToggleButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Parent = Frame

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 40, 0, 20)
MinimizeButton.Position = UDim2.new(1, -45, 0, 5)
MinimizeButton.Text = "-"
MinimizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Parent = Frame

-- Power Slider
local PowerSlider = Instance.new("TextButton")
PowerSlider.Size = UDim2.new(1, -20, 0, 20)
PowerSlider.Position = UDim2.new(0, 10, 0, 60)
PowerSlider.Text = "Power: "..flingPower
PowerSlider.BackgroundColor3 = Color3.fromRGB(100, 100, 200)
PowerSlider.TextColor3 = Color3.fromRGB(255, 255, 255)
PowerSlider.Parent = Frame

-- Target Mode Button
local TargetButton = Instance.new("TextButton")
TargetButton.Size = UDim2.new(1, -20, 0, 20)
TargetButton.Position = UDim2.new(0, 10, 0, 90)
TargetButton.Text = "Target: All"
TargetButton.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
TargetButton.TextColor3 = Color3.fromRGB(255,255,255)
TargetButton.Parent = Frame

-- Direction Button
local DirectionButton = Instance.new("TextButton")
DirectionButton.Size = UDim2.new(1, -20, 0, 20)
DirectionButton.Position = UDim2.new(0, 10, 0, 120)
DirectionButton.Text = "Direction: Random"
DirectionButton.BackgroundColor3 = Color3.fromRGB(200, 200, 50)
DirectionButton.TextColor3 = Color3.fromRGB(0,0,0)
DirectionButton.Parent = Frame

-- Drag GUI
local dragging, dragInput, dragStart, startPos
Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)
Frame.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- ===== Button Actions =====
ToggleButton.MouseButton1Click:Connect(function()
    flingEnabled = not flingEnabled
    ToggleButton.Text = flingEnabled and "Fling ON" or "Fling OFF"
end)

MinimizeButton.MouseButton1Click:Connect(function()
    guiVisible = not guiVisible
    Frame.Size = guiVisible and UDim2.new(0, 280, 0, 220) or UDim2.new(0, 60, 0, 30)
    MinimizeButton.Text = guiVisible and "-" or "+"
end)

PowerSlider.MouseButton1Click:Connect(function()
    flingPower = flingPower + 1000
    if flingPower > 20000 then flingPower = 1000 end
    PowerSlider.Text = "Power: "..flingPower
end)

TargetButton.MouseButton1Click:Connect(function()
    if targetMode == "All" then
        targetMode = "Selected"
        TargetButton.Text = "Target: Selected"
    else
        targetMode = "All"
        TargetButton.Text = "Target: All"
    end
end)

DirectionButton.MouseButton1Click:Connect(function()
    if flingDirection == "Random" then
        flingDirection = "Vertical"
        DirectionButton.Text = "Direction: Vertical"
    elseif flingDirection == "Vertical" then
        flingDirection = "Horizontal"
        DirectionButton.Text = "Direction: Horizontal"
    else
        flingDirection = "Random"
        DirectionButton.Text = "Direction: Random"
    end
end)

-- ===== Extreme Fling Logic =====
RunService.Heartbeat:Connect(function()
    if flingEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = LocalPlayer.Character.HumanoidRootPart
        local targets = {}
        if targetMode == "All" then
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    table.insert(targets, player.Character.HumanoidRootPart)
                end
            end
        elseif targetMode == "Selected" and selectedTarget and selectedTarget.Character and selectedTarget.Character:FindFirstChild("HumanoidRootPart") then
            table.insert(targets, selectedTarget.Character.HumanoidRootPart)
        end

        for _, targetHRP in pairs(targets) do
            for i = 1, 5 do -- multi-hit
                local dir
                if flingDirection == "Random" then
                    dir = (targetHRP.Position - hrp.Position).unit + Vector3.new(math.random(-50,50), math.random(20,100), math.random(-50,50))
                elseif flingDirection == "Vertical" then
                    dir = Vector3.new(0,1,0)
                else -- Horizontal
                    local horizontal = (targetHRP.Position - hrp.Position)
                    horizontal = Vector3.new(horizontal.X,0,horizontal.Z).unit
                    dir = horizontal
                end
                hrp.Velocity = dir * flingPower
            end
        end
    end
end)
