-- Auto Fling GUI dengan Radius (slider), Power (1-5000), ON/OFF, Drag, dan Minimize
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- ===== GUI Utama =====
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FlingGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 240, 0, 180)
Frame.Position = UDim2.new(0.5, -120, 0.7, 0)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BackgroundTransparency = 0.2
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Title.Text = "⚡ Auto Fling GUI"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20
Title.Parent = Frame

-- Tombol minimize
local MinButton = Instance.new("TextButton")
MinButton.Size = UDim2.new(0, 30, 0, 30)
MinButton.Position = UDim2.new(1, -35, 0, 0)
MinButton.Text = "-"
MinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
MinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinButton.Font = Enum.Font.SourceSansBold
MinButton.TextSize = 20
MinButton.Parent = Frame

-- GUI saat minimize
local MiniFrame = Instance.new("TextButton")
MiniFrame.Size = UDim2.new(0, 120, 0, 40)
MiniFrame.Position = UDim2.new(0.5, -60, 0.85, 0)
MiniFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MiniFrame.TextColor3 = Color3.fromRGB(255, 255, 255)
MiniFrame.Text = "⚡ Fling GUI"
MiniFrame.Font = Enum.Font.SourceSansBold
MiniFrame.TextSize = 18
MiniFrame.Visible = false
MiniFrame.Active = true
MiniFrame.Draggable = true
MiniFrame.Parent = ScreenGui

-- ===== Radius Slider =====
local SliderBack = Instance.new("Frame")
SliderBack.Size = UDim2.new(1, -20, 0, 10)
SliderBack.Position = UDim2.new(0, 10, 0.25, -5)
SliderBack.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
SliderBack.Parent = Frame

local SliderButton = Instance.new("TextButton")
SliderButton.Size = UDim2.new(0, 20, 0, 20)
SliderButton.Position = UDim2.new(0, 0, -0.5, 0)
SliderButton.Text = ""
SliderButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
SliderButton.Parent = SliderBack

local RadiusLabel = Instance.new("TextLabel")
RadiusLabel.Size = UDim2.new(1, 0, 0, 30)
RadiusLabel.Position = UDim2.new(0, 0, 0.32, 0)
RadiusLabel.BackgroundTransparency = 1
RadiusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusLabel.Text = "Radius: 10"
RadiusLabel.Parent = Frame

-- ===== Power Input =====
local PowerLabel = Instance.new("TextLabel")
PowerLabel.Size = UDim2.new(0.5, 0, 0, 30)
PowerLabel.Position = UDim2.new(0, 10, 0.5, 0)
PowerLabel.BackgroundTransparency = 1
PowerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
PowerLabel.Text = "Power (1-5000):"
PowerLabel.TextXAlignment = Enum.TextXAlignment.Left
PowerLabel.Parent = Frame

local PowerBox = Instance.new("TextBox")
PowerBox.Size = UDim2.new(0.4, 0, 0, 30)
PowerBox.Position = UDim2.new(0.55, 0, 0.5, 0)
PowerBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
PowerBox.TextColor3 = Color3.fromRGB(255, 255, 255)
PowerBox.PlaceholderText = "200"
PowerBox.Text = "200"
PowerBox.ClearTextOnFocus = false
PowerBox.Parent = Frame

-- ===== ON/OFF Toggle =====
local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0.6, 0, 0, 30)
ToggleButton.Position = UDim2.new(0.2, 0, 0.8, 0)
ToggleButton.Text = "Fling: ON"
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18
ToggleButton.Parent = Frame

-- ===== Logic =====
local radius = 10
local flingPower = 200
local dragging = false
local flingEnabled = true

-- Update radius via slider
local function updateRadius(x)
    local relativeX = math.clamp((x - SliderBack.AbsolutePosition.X) / SliderBack.AbsoluteSize.X, 0, 1)
    local value = math.floor(relativeX * 100)
    if value < 1 then value = 1 end
    radius = value
    SliderButton.Position = UDim2.new(relativeX, -10, -0.5, 0)
    RadiusLabel.Text = "Radius: " .. tostring(radius)
end

SliderButton.MouseButton1Down:Connect(function()
    dragging = true
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        updateRadius(input.Position.X)
    end
end)

-- Power input manual
PowerBox.FocusLost:Connect(function()
    local val = tonumber(PowerBox.Text)
    if val and val >= 1 and val <= 5000 then
        flingPower = val
    else
        PowerBox.Text = tostring(flingPower) -- reset kalau salah input
    end
end)

-- Toggle ON/OFF
ToggleButton.MouseButton1Click:Connect(function()
    flingEnabled = not flingEnabled
    if flingEnabled then
        ToggleButton.Text = "Fling: ON"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        ToggleButton.Text = "Fling: OFF"
        ToggleButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    end
end)

-- Minimize/Restore
MinButton.MouseButton1Click:Connect(function()
    Frame.Visible = false
    MiniFrame.Visible = true
end)

MiniFrame.MouseButton1Click:Connect(function()
    Frame.Visible = true
    MiniFrame.Visible = false
end)

-- ===== Fling Function =====
local function flingTarget(targetHRP, fromHRP)
    local bv = Instance.new("BodyVelocity")
    bv.Velocity = (targetHRP.Position - fromHRP.Position).Unit * flingPower
    bv.MaxForce = Vector3.new(100000, 100000, 100000)
    bv.Parent = targetHRP
    game.Debris:AddItem(bv, 0.2)
end

RunService.Heartbeat:Connect(function()
    if not flingEnabled then return end

    local char = LocalPlayer.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
            local targetHRP = plr.Character.HumanoidRootPart
            local dist = (targetHRP.Position - hrp.Position).Magnitude

            if dist < radius then
                flingTarget(targetHRP, hrp)
            end
        end
    end
end)
