-- LocalScript (StarterPlayer > StarterPlayerScripts)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

-- tunggu karakter siap
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

-- pengaturan
local walkSpeed = 16
local autoWalk = false

-- BodyVelocity biar bisa jalan di udara
local bodyVelocity = Instance.new("BodyVelocity")
bodyVelocity.MaxForce = Vector3.new(100000, 0, 100000) -- hanya XZ
bodyVelocity.Velocity = Vector3.new(0, 0, 0)
bodyVelocity.Parent = hrp

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AutoWalkGui"
ScreenGui.Parent = player:WaitForChild("PlayerGui")

-- tombol toggle
local ToggleBtn = Instance.new("TextButton")
ToggleBtn.Size = UDim2.new(0, 180, 0, 60)
ToggleBtn.Position = UDim2.new(0.5, -90, 1, -160)
ToggleBtn.Text = "Auto Walk: OFF"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleBtn.TextScaled = true
ToggleBtn.BackgroundTransparency = 0.2
ToggleBtn.Parent = ScreenGui
ToggleBtn.BorderSizePixel = 0
ToggleBtn.TextStrokeTransparency = 0.5
ToggleBtn.Font = Enum.Font.GothamBold
ToggleBtn.Active = true
ToggleBtn.Draggable = true

-- text box untuk kecepatan
local SpeedBox = Instance.new("TextBox")
SpeedBox.Size = UDim2.new(0, 180, 0, 50)
SpeedBox.Position = UDim2.new(0.5, -90, 1, -100)
SpeedBox.Text = tostring(walkSpeed)
SpeedBox.PlaceholderText = "Masukkan Speed"
SpeedBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
SpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedBox.TextScaled = true
SpeedBox.Parent = ScreenGui
SpeedBox.BorderSizePixel = 0
SpeedBox.Font = Enum.Font.GothamBold

-- toggle fungsi
ToggleBtn.MouseButton1Click:Connect(function()
	autoWalk = not autoWalk
	if autoWalk then
		ToggleBtn.Text = "Auto Walk: ON"
		ToggleBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
	else
		ToggleBtn.Text = "Auto Walk: OFF"
		ToggleBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
		bodyVelocity.Velocity = Vector3.new(0, 0, 0)
	end
end)

-- ubah speed lewat text box
SpeedBox.FocusLost:Connect(function(enterPressed)
	if enterPressed then
		local newSpeed = tonumber(SpeedBox.Text)
		if newSpeed and newSpeed > 0 then
			walkSpeed = newSpeed
		else
			SpeedBox.Text = tostring(walkSpeed) -- reset kalau salah input
		end
	end
end)

-- loop gerak
RunService.RenderStepped:Connect(function()
	if autoWalk and humanoid.Health > 0 then
		local camera = Workspace.CurrentCamera
		local camLook = camera.CFrame.LookVector
		local moveDir = Vector3.new(camLook.X, 0, camLook.Z).Unit * walkSpeed
		bodyVelocity.Velocity = moveDir
	end
end)
